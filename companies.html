<script>
// دالة محسنة لتحميل الشركات
function loadCompanies() {
    const container = document.getElementById('companiesList');
    if (!container) return;
    
    // بيانات الشركات مع شعارات مناسبة
    const companies = [
        {
            id: 1,
            name: "تكنو سوفت العراق",
            category: "tech",
            description: "شركة رائدة في مجال تطوير البرمجيات والحلول التقنية في العراق",
            logo: '<i class="fas fa-laptop-code" style="font-size: 40px; color: #3b82f6;"></i>',
            jobs: 12,
            rating: 4.8,
            location: "بغداد",
            established: 2010
        },
        {
            id: 2,
            name: "بنك الرافدين",
            category: "finance",
            description: "أحد أكبر البنوك العراقية يقدم خدمات مصرفية متكاملة",
            logo: '<i class="fas fa-university" style="font-size: 40px; color: #10b981;"></i>',
            jobs: 24,
            rating: 4.6,
            location: "كافة المحافظات",
            established: 1941
        },
        {
            id: 3,
            name: "شركة نفط الجنوب",
            category: "energy",
            description: "الشركة الرائدة في مجال استخراج وتصنيع النفط والغاز",
            logo: '<i class="fas fa-oil-can" style="font-size: 40px; color: #f59e0b;"></i>',
            jobs: 45,
            rating: 4.9,
            location: "البصرة",
            established: 1972
        },
        {
            id: 4,
            name: "مستشفى الكفيل التخصصي",
            category: "health",
            description: "مستشفى متخصص يقدم خدمات طبية متطورة في كافة التخصصات",
            logo: '<i class="fas fa-hospital" style="font-size: 40px; color: #ef4444;"></i>',
            jobs: 18,
            rating: 4.7,
            location: "كربلاء",
            established: 2003
        },
        {
            id: 5,
            name: "زين العراق",
            category: "tech",
            description: "شركة اتصالات رائدة في العراق تقدم خدمات الجيل الرابع",
            logo: '<i class="fas fa-mobile-alt" style="font-size: 40px; color: #8b5cf6;"></i>',
            jobs: 32,
            rating: 4.5,
            location: "كافة المحافظات",
            established: 2003
        },
        {
            id: 6,
            name: "مجموعة الناصر",
            category: "finance",
            description: "مجموعة استثمارية متنوعة الأنشطة في القطاع المالي والتجاري",
            logo: '<i class="fas fa-chart-line" style="font-size: 40px; color: #06b6d4;"></i>',
            jobs: 15,
            rating: 4.4,
            location: "بغداد",
            established: 1998
        },
        {
            id: 7,
            name: "أسياد للإنشاءات",
            category: "construction",
            description: "شركة متخصصة في الإنشاءات والبنية التحتية",
            logo: '<i class="fas fa-truck" style="font-size: 40px; color: #f97316;"></i>',
            jobs: 22,
            rating: 4.3,
            location: "أربيل",
            established: 2005
        },
        {
            id: 8,
            name: "أكاديمية العراق الرقمية",
            category: "education",
            description: "مؤسسة تعليمية رائدة في مجال التدريب التقني",
            logo: '<i class="fas fa-graduation-cap" style="font-size: 40px; color: #ec4899;"></i>',
            jobs: 8,
            rating: 4.8,
            location: "بغداد",
            established: 2015
        }
    ];
    
    // حفظ البيانات في localStorage
    localStorage.setItem('wathafni_companies', JSON.stringify(companies));
    
    // مسح المحتوى القديم
    container.innerHTML = '';
    
    // إنشاء بطاقات الشركات
    companies.forEach(company => {
        const card = document.createElement('div');
        card.className = 'company-card';
        card.dataset.category = company.category;
        
        card.innerHTML = `
            <div class="company-logo">${company.logo}</div>
            <div class="company-info">
                <h3>${company.name}</h3>
                <span class="company-category">${getCategoryName(company.category)}</span>
                <p class="company-description">${company.description}</p>
                <div class="company-stats">
                    <span><i class="fas fa-briefcase"></i> ${company.jobs} وظيفة</span>
                    <span><i class="fas fa-star"></i> ${company.rating}/5</span>
                    <span><i class="fas fa-map-marker-alt"></i> ${company.location}</span>
                </div>
            </div>
            <button class="btn btn-outline btn-block" onclick="viewCompany(${company.id})">
                <i class="fas fa-eye"></i> عرض التفاصيل
            </button>
        `;
        
        container.appendChild(card);
    });
    
    // إضافة تأثيرات عند التمرير
    animateOnScroll();
}

// دالة محسنة للحصول على اسم القطاع
function getCategoryName(category) {
    const categories = {
        'tech': 'تقنية المعلومات',
        'finance': 'خدمات مالية',
        'energy': 'طاقة ونفط',
        'health': 'رعاية صحية',
        'construction': 'إنشاءات ومقاولات',
        'education': 'تعليم وتدريب'
    };
    return categories[category] || category;
}

// عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', function() {
    // تحميل الشركات مباشرة
    loadCompanies();
    
    // إعداد الفلاتر
    if (typeof setupFilterTags === 'function') {
        setupFilterTags();
    }
    
    // إعداد الهيدر الذكي
    if (typeof initSmartHeader === 'function') {
        initSmartHeader();
    }
});
</script>
